<!-- ... m√™me <head> que pr√©c√©demment ... -->
<body>
  <header>
    <div class="brand">
      <div style="font-size:20px">üêÄ</div>
      <div>Adopte un surmulot</div>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero">
      <div class="card">
        <h1>Adopte un surmulot</h1>
        <p>Choisis l‚Äôendroit sur la carte, baptise ton surmulot et vois-le appara√Ætre parmi les adoptions.</p>
        <ul>
          <li>üó∫Ô∏è Clique sur la carte pour placer ton surmulot (optionnel)</li>
          <li>üìù Remplis le formulaire</li>
          <li>‚ú® Il appara√Æt dans la liste et sur la carte</li>
        </ul>
      </div>
      <div class="card">
        <div id="map" class="map"></div>
      </div>
    </section>

    <!-- FORM -->
    <section class="card" style="margin-top:22px">
      <h2>Formulaire d‚Äôadoption</h2>
      <form id="adopt-form">
        <div>
          <label for="name">Nom du surmulot</label>
          <input id="name" name="name" required placeholder="Ex. Frometon">
        </div>
        <div>
          <label for="guardian">Ton pr√©nom (affich√©)</label>
          <input id="guardian" name="guardian" required placeholder="Ex. Guillaume">
        </div>
        <div class="full">
          <label for="story">Petite histoire (facultatif)</label>
          <textarea id="story" name="story" placeholder="Ex. Rencontr√© pr√®s d‚Äôun square, adore les croissants secs."></textarea>
        </div>
        <div>
          <label for="date">Date d‚Äôadoption</label>
          <input id="date" name="date" type="date" required>
        </div>
        <input type="hidden" id="lat">
        <input type="hidden" id="lng">
        <button class="cta full" type="submit">Adopter ce surmulot</button>
      </form>
    </section>

    <!-- LISTE -->
    <section class="card" style="margin-top:22px">
      <h2>Adoptions r√©centes</h2>
      <div id="adoptions" class="adoptions" aria-live="polite"></div>
    </section>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', ()=>{
      const DEFAULT_CENTER = [48.8619, 2.3790]; // Paris 11e
      const DEFAULT_ZOOM = 15;
      let map = L.map('map').setView(DEFAULT_CENTER, DEFAULT_ZOOM);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; OpenStreetMap'
      }).addTo(map);

      let lastMarker = null;
      map.on('click', (e)=>{
        const {lat, lng} = e.latlng;
        if(lastMarker){ map.removeLayer(lastMarker); }
        lastMarker = L.marker([lat, lng]).addTo(map).bindPopup('Emplacement choisi');
        document.getElementById('lat').value = lat.toFixed(6);
        document.getElementById('lng').value = lng.toFixed(6);
      });

      // Pr√©-remplir la date du jour
      document.getElementById('date').valueAsDate = new Date();
    });
  </script>
</body>
</html>
